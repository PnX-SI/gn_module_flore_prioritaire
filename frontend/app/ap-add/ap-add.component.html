
<div class="row row-0">
  <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 padding-sm">
    <!-- MAP -->
    <pnx-map height="94vh" [center]="center" [zoom]="zoom">
      <pnx-leaflet-draw [options]="leafletDrawOptions" [zoomLevel]="1" (layerDrawed)="getGeojson($event)"
        (layerDeleted)="deleteControlValue()">
      </pnx-leaflet-draw>
      <pnx-geojson #geojson [onEachFeature]="onEachFeature.bind(this)" [geojson]="zp"></pnx-geojson>
      <pnx-geojson #geojson [onEachFeature]="onEachFeature.bind(this)" [geojson]="site"></pnx-geojson>
    </pnx-map>
  </div>

  <div class="card col-xs-12 col-sm-12 col-md-6 col-lg-6 padding-sm tab-container list-sht">
    <div class="card-body">
      <form class="wrapper wrapper-filter">
        <fieldset>
          <legend>
            <h3>Ajout d'une nouvelle aire de présence</h3>
          </legend>
          <div class="form-group">
              <small> Perturbation </small>
              <div class="" id="newPerturs">
                <pnx-nomenclature [parentFormControl]="dynamicFormGroup.controls.cor_zp_observer" [multiSelect]="true"
                    keyValue="id_nomenclature" [bindAllItem]="true" keyLabel="label_default"
                    [disabled]="disabledForm"
                    codeNomenclatureType="TYPE_PERTURBATION">
                </pnx-nomenclature>
              </div>
            </div>
            <div class="form-group">
              <small> Physionomie </small>
              <div class="" id="newPhysio">
                <pnx-nomenclature [parentFormControl]="dynamicFormGroup.controls.cor_zp_observer" [multiSelect]="true"
                    keyValue="id_nomenclature" [bindAllItem]="true" keyLabel="label_default"
                    [disabled]="disabledForm"
                    codeNomenclatureType="TYPE_PHYSIONOMIE">
                </pnx-nomenclature>
              </div>
            </div>
            <div class="form-group">
              <small> Phénologie </small>
              <div class="" id="newPheno">
                <pnx-nomenclature [parentFormControl]="dynamicFormGroup.controls.cor_zp_observer" [multiSelect]="false"
                    keyValue="id_nomenclature" [bindAllItem]="true" keyLabel="label_default"
                    [disabled]="disabledForm"
                    codeNomenclatureType="TYPE_PHENOLOGIE">
                </pnx-nomenclature>
              </div>
            </div>
            <div class="form-group">
              <small> Méthode de comptage </small>
              <div class="" id="newCountMethod">
                <pnx-nomenclature [parentFormControl]="dynamicFormGroup.controls.cor_zp_observer" [multiSelect]="false"
                    keyValue="id_nomenclature" [bindAllItem]="true" keyLabel="label_default"
                    [disabled]="disabledForm"
                    codeNomenclatureType="METHODE_COMPTAGE">
                </pnx-nomenclature>
              </div>
            </div>
            <div class="form-group">
              <small> Pente </small>
              <div class="" id="newPente">
                <pnx-nomenclature [parentFormControl]="dynamicFormGroup.controls.cor_zp_observer" [multiSelect]="false"
                    keyValue="id_nomenclature" [bindAllItem]="true" keyLabel="label_default"
                    [disabled]="disabledForm"
                    codeNomenclatureType="PENTE">
                </pnx-nomenclature>
              </div>
            </div>
            <div class="row">
              <div>
                <small> Total stériles </small>
                <div class="">
                  <textarea class="form-control" rows="2" id="commentaire" [formControl]="dynamicFormGroup.controls.comments"></textarea>
                </div>
              </div>
              <div>
                <small> Total fertiles </small>
                <div class="">
                  <textarea class="form-control" rows="2" id="commentaire" [formControl]="dynamicFormGroup.controls.comments"></textarea>
                </div>
              </div>
            </div>
            <div class="form-group">
              <small> Commentaires </small>
              <div class="">
                  <textarea class="form-control" rows="2" id="commentaire" [formControl]="dynamicFormGroup.controls.comments"></textarea>
              </div>
            </div>
        </fieldset>
      </form>
      <div class="wrapper">
        <ngx-datatable class="material" [columnMode]="'force'" [rows]="filteredData" [headerHeight]="50" [footerHeight]="50"
            [rowHeight]="'auto'" [messages]="storeService.shtConfig.list_visit_message" [offset]="mapListService.page.pageNumber"
            [limit]="mapListService.page.size"[selected]="mapListService.selectedRow" [selectionType]="'single'" (select)="mapListService.onRowSelect($event)"
            [rowClass]="mapListService.getRowClass">

            <ngx-datatable-column *ngFor="let col of storeService.shtConfig.default_ap_columns" [name]="col.name"
                [prop]="col.prop" maxWidth="col.maxWidth">
            </ngx-datatable-column>

        </ngx-datatable>
      </div>
      <button id="add-btn" type="button" class="btn btn-success box-shadow" (click)="onPostAp()">
        <i class="fa fa-plus-circle" aria-hidden="true"> </i> Ajouter
      </button>
      <button id="cancel-btn" type="button" class="btn btn-cancel box-shadow" (click)="onCancelAddAp()">
        <i class="fa fa-times-circle" aria-hidden="true"> </i> Annuler
    </button>
    </div>
  </div>
</div>